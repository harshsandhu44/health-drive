# HealthDrive To-Do List

This to-do list tracks tasks for the HealthDrive project, organized by milestones (Week 1 and
Week 2) as outlined in the project requirements. Updates reflect the use of `text` for Clerk IDs
(`Organizations.id`, `Users.id`) and `Doctors.id` (autogenerated).

## Week 1: Foundation and Core Features

- [x] **PWA Setup**
  - Configure Next.js 15 for PWA with notification support.
  - Test app installation and push notifications.
  - Created debug route `/debug` for PWA testing separate from main app.
  - Implemented PWA manifest, service worker, and push notification support.
  - Added PWA debug components for testing functionality.

- [x] **Database Setup**
  - Initialize Supabase project.
  - Create tables: Organizations (id: text for Clerk), Users (id, organization_id: text for
    Clerk), Doctors (id: text, autogenerated), Departments, Appointments, Patients, Patient_Records,
    Analytics_Logs.
  - Set up real-time subscriptions for Appointments and Analytics_Logs.
  - Implemented Row Level Security policies for data privacy.
  - Created seed data for testing and development.
  - Set up Supabase client utilities for SSR with @supabase/ssr package.

- [x] **Authentication**
  - Integrate Clerk for user and organization authentication using text IDs.
  - Configure Clerk webhook to sync organizations (id: text) and users (id, organization_id:
    text) to Supabase.
  - Test authentication flow and data sync with text IDs.
  - Implement route groups for auth and protected pages following Next.js 15 best practices.
  - Create middleware for automatic route protection.
  - Add ClerkProvider to root layout and UserButton for user management.
  - Create comprehensive authentication documentation.

- [x] **Zustand State Management Setup**
  - Install Zustand and create stores for:
    - Appointments (real-time data handling).
    - Analytics (real-time metrics).
    - UI (popups, sidebar state).
    - Patients (search caching).
    - Auth (Clerk user/organization data).
    - Doctors (CRUD operations).
  - Integrate stores with Supabase real-time subscriptions.
  - Created TypeScript interfaces for all data models.
  - Implemented error handling and loading states.
  - Set up store exports through index file.

- [x] **Dashboard UI**
  - Design analytics cards (Today's Appointments, Patients/Week, Doctors) using Shadcn UI and
    TailwindCSS.
  - Implement data table for today's appointments with sorting/filtering and actions (update status,
    cancel, view details).
  - Ensure real-time updates using Supabase subscriptions.

- [ ] **Doctors Page**
  - Create data table for doctors listing (Name, Department, Contact).
  - Implement add/edit doctor popups with form validation, ensuring autogenerated text ID.
  - Integrate with Supabase for CRUD operations.

- [ ] **Appointments Page**
  - Create data table for appointments listing (Patient, Doctor, Date, Time, Status) with actions
    (update status, cancel, view details).
  - Implement add/edit appointment popups with phone number-based patient search and new patient
    fields (name, phone, DOB, blood group).
  - Enable real-time updates for appointments.

- [ ] **Appointment Details Page**
  - Create page to display full appointment details.
  - Integrate with Supabase to fetch appointment data by ID.

- [ ] **Analytics Page**
  - Build analytics overview (Total Appointments, Per Doctor, Returning Patients).
  - Implement CSV and PDF export functionality.
  - Ensure real-time analytics updates.

- [ ] **UI/UX Enhancements**
  - Apply Motion animations for popups and page transitions.
  - Test responsiveness across devices.

## Week 2: Billing and Support

- [ ] **Billing Integration**
  - Integrate Paytm SDK for organization billing.
  - Create billing management UI (view plans, payment status).
  - Test payment flow and error handling.

- [ ] **Help Page**
  - Design help page with contact email (support@healthdrive.in).
  - Add FAQ section with common questions.
  - Implement email contact button (mailto link).

- [ ] **Testing and Deployment**
  - Conduct end-to-end testing for all features, verifying text ID handling.
  - Deploy application to production environment.
  - Monitor real-time performance and fix bugs.

## Notes

- Prioritize real-time features and authentication in Week 1 to ensure core functionality.
- Validate Clerk text IDs during webhook sync to prevent errors.
- Use Supabase dashboard to monitor database performance.
- Document any third-party integration issues (Clerk, Paytm) for quick resolution.
